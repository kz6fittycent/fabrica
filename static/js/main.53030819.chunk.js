(this.webpackJsonpwebapp=this.webpackJsonpwebapp||[]).push([[0],{115:function(e,t,a){"use strict";a.r(t);var n=a(0),l=a.n(n),r=a(31),i=a.n(r),o=(a(37),a(5)),c=a(6),s=a(8),u=a(7),d={build:"Build","build-log":"Build Log","build-title":"Build a snap",created:"Created","getting-ready":"Getting ready for lift off...",name:"Name",repo:"Repository",status:"Status"};function p(e){return d[e]||e}function m(e){var t=p(e.code);return e.message&&(t+=": "+e.message),t}var b=[],h=function(e){Object(s.a)(a,e);var t=Object(u.a)(a);function a(e){var n;return Object(o.a)(this,a),(n=t.call(this,e)).state={},n}return Object(c.a)(a,[{key:"link",value:function(e){return this.props.sectionId?"/"+this.props.section+"/"+this.props.sectionId+"/"+e:"/"+e}},{key:"render",value:function(){var e=this;return l.a.createElement("header",{id:"navigation",class:"p-navigation header-slim"},l.a.createElement("div",{className:"p-navigation__banner row"},l.a.createElement("div",{className:"p-navigation__logo"},l.a.createElement("div",{className:"u-vertically-center"},l.a.createElement("a",{href:"/",className:"p-navigation__link"},l.a.createElement("img",{src:"/static/images/fabrica.png",alt:"ubuntu"})))),l.a.createElement("nav",{className:"p-navigation__nav"},l.a.createElement("span",{className:"u-off-screen"},l.a.createElement("a",{href:"#navigation"},"Jump to site")),l.a.createElement("ul",{className:"p-navigation__links",role:"menu"},b.map((function(t){var a="";return e.props.section!==t&&e.props.subsection!==t||(a=" active"),l.a.createElement("li",{key:t,className:"p-navigation__link"+a,role:"menuitem"},l.a.createElement("a",{href:e.link(t)},p(t)))}))))))}}]),a}(n.Component),f=a(10),v=a.n(f);var g={baseUrl:window.location.protocol+"//"+window.location.hostname+":"+window.location.port+"/v1/"},E={build:function(e,t){return v.a.post(g.baseUrl+"build",{repo:e})},buildList:function(e){return v.a.get(g.baseUrl+"builds")},buildGet:function(e,t){return v.a.get(g.baseUrl+"builds/"+e)}},k=a(3),w=function(e){Object(s.a)(a,e);var t=Object(u.a)(a);function a(e){var n;return Object(o.a)(this,a),(n=t.call(this,e)).handleRepoChange=function(e){e.preventDefault(),n.setState({repo:e.target.value})},n.handleClick=function(e){e.preventDefault(),E.build(n.state.repo).then((function(e){window.location.href="/builds/"+e.data.message})).catch((function(e){console.log(m(e.response.data)),n.setState({error:m(e.response.data),message:""})}))},n.state={repo:""},n}return Object(c.a)(a,[{key:"render",value:function(){return l.a.createElement(k.Row,null,l.a.createElement("br",null),l.a.createElement(k.Card,{title:p("build-title")},l.a.createElement(k.Form,null,l.a.createElement(k.Input,{onChange:this.handleRepoChange,type:"text",id:"repo",placeholder:"https://github.com/ogra1/fabrica.git",label:"Git Repo",value:this.state.repo}),l.a.createElement(k.Button,{onClick:this.handleClick,appearance:"positive"},p("build")))))}}]),a}(n.Component),C=function(e){Object(s.a)(a,e);var t=Object(u.a)(a);function a(e){var n;return Object(o.a)(this,a),(n=t.call(this,e)).handleBuildClick=function(e){e.preventDefault(),n.getData()},n.handleShowClick=function(e){n.setState({expandedRow:1})},n.state={builds:[],expanded:!1,expandedContent:null},n}return Object(c.a)(a,[{key:"getData",value:function(){var e=this;E.buildList().then((function(t){e.setState({builds:t.data.records})})).catch((function(t){console.log(m(t.response.data)),e.setState({error:m(t.response.data),message:""})}))}},{key:"componentDidMount",value:function(){this.getData()}},{key:"render",value:function(){var e=this.state.builds.map((function(e){return{columns:[{content:e.name,role:"rowheader"},{content:e.repo},{content:e.created},{content:l.a.createElement(k.Link,{href:"/builds/"+e.id},p("show"))}]}}));return l.a.createElement("div",null,l.a.createElement(w,{onClick:this.handleBuildClick}),l.a.createElement(k.MainTable,{headers:[{content:p("name")},{content:p("repo")},{content:p("created")},{content:""}],rows:e}))}}]),a}(n.Component),j=a(9);var y=function(e){return l.a.createElement(k.Card,null,e.fields.map((function(e){return l.a.createElement(k.Row,null,l.a.createElement(k.Col,{size:2},e.label,":"),l.a.createElement(k.Col,{size:10,className:"field_value"},e.value))})))},O=function(e){Object(s.a)(a,e);var t=Object(u.a)(a);function a(e){var n;return Object(o.a)(this,a),(n=t.call(this,e)).poll=function(){setTimeout(n.getData.bind(Object(j.a)(n)),500)},n.state={build:{}},n}return Object(c.a)(a,[{key:"componentDidMount",value:function(){this.getData()}},{key:"getData",value:function(){var e=this;E.buildGet(this.props.buildId).then((function(t){e.setState({build:t.data.record})})).catch((function(t){console.log(m(t.response.data)),e.setState({error:m(t.response.data),message:""})})).finally((function(){e.poll()}))}},{key:"renderLog",value:function(){return this.state.build.logs?this.state.build.logs.map((function(e){return e.message+"\r\n"})):p("getting-ready")+"\r\n"}},{key:"render",value:function(){return l.a.createElement(k.Row,null,l.a.createElement("h3",null,p("build-log")),l.a.createElement(k.Row,null,l.a.createElement(y,{fields:[{label:p("name"),value:this.state.build.name},{label:p("repo"),value:this.state.build.repo},{label:p("created"),value:this.state.build.created},{label:p("status"),value:this.state.build.status}]}),l.a.createElement(k.Code,null,this.renderLog())))}}]),a}(n.Component),_=function(e){Object(s.a)(a,e);var t=Object(u.a)(a);function a(){return Object(o.a)(this,a),t.apply(this,arguments)}return Object(c.a)(a,[{key:"render",value:function(){var e=function(){var e=window.location.pathname.split("/");switch(e.length){case 2:return{section:e[1]};case 3:return{section:e[1],sectionId:e[2]};case 4:return{section:e[1],sectionId:e[2],subsection:e[3]};default:return{}}}();return l.a.createElement("div",null,l.a.createElement(h,null),""===e.section?l.a.createElement(C,null):"","builds"===e.section?l.a.createElement(O,{buildId:e.sectionId}):"")}}]),a}(n.Component);i.a.render(l.a.createElement(l.a.StrictMode,null,l.a.createElement(_,null)),document.getElementById("root"))},32:function(e,t,a){e.exports=a(115)},37:function(e,t,a){}},[[32,1,2]]]);
//# sourceMappingURL=main.53030819.chunk.js.map